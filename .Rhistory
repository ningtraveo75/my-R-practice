View(finStatement)
loss <- finStatement[["營業利益（損失）"]]<0
loss1Companies <- finStatement[loss]
loss <- finStatement[[,"營業利益（損失）"]]<0
loss <- finStatement[["營業利益（損失）",]]<0
loss1Companies <- finStatement[loss]
loss <- finStatement[["營業利益（損失）",]]
loss1Companies <- finStatement[loss]
loss <- finStatement["營業利益（損失）",]
loss1Companies <- finStatement[loss]
View(loss)
loss <- finStatement[,"營業利益（損失）"]
loss1Companies <- finStatement[loss]
View(loss)
loss <- finStatement[,"營業利益（損失）"]<0
loss1Companies <- finStatement[loss]
loss <- finStatement[,"營業利益（損失）"]<0
loss1Companies <- finStatement[,"公司名稱"][loss]
loss <- finStatement[,"營業利益（損失）"]<0
loss1Companies <- finStatement$公司名稱[loss]
loss <- finStatement[,"營業利益（損失）"]<0
loss1Companies <- finStatement$公司名稱[loss]
loss1Companies
loss <- finStatement$`營業利益（損失）`<0
loss1Companies <- finStatement$公司名稱[loss]
loss1Companies
loss <- finStatement$`營業利益（損失）`<0
loss1Companies <- finStatement$`公司名稱`[loss]
loss1Companies
loss1 <- finStatement$`營業利益（損失）`<0
loss1Companies <- finStatement$`公司名稱`[loss1]
loss1Companies
loss2 <- finStatement$`基本每股盈餘（元）`<0
loss2Companies <- finStatement$`公司名稱`[loss2]
loss2Companies
only1Loss <- finStatement$`營業利益（損失）`<0 | finStatement$`基本每股盈餘（元）`<0
only1LossCompanies <- finStatement$`公司名稱`[only1Loss]
only1LossCompanies
only1Loss <- finStatement[,`營業利益（損失）`]<0 | finStatement[,`基本每股盈餘（元）`]<0
only1Loss <- finStatement[,營業利益（損失）]<0 | finStatement[,`基本每股盈餘（元）`]<0
only1Loss <- finStatement[,"營業利益（損失）"]<0 | finStatement[,"基本每股盈餘（元）"]<0
only1LossCompanies <- finStatement$`公司名稱`[only1Loss]
as.data.frame(only1LossCompanies, stringsAsFactors = FALSE)
only1LossCompanies
library(httr)
exhibitionList <- content(GET("https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=6"))
View(exhibitionList)
str(exhibitionList[[1]])
View(exhibitionList)
length(exhibitionList[[1]])
numExhibitions
numExhibitions <- length(exhibitionList[[1]])
numExhibitions
numExhibitions <- length(exhibitionList)
numExhibitions
str(exhibitionList[[1]])
df_oneShow <- data.frame(
title=exhibitionList$title,
time=showInfo$time,
location=showInfo$location,
locationName=showInfo$locationName,
price=showInfo$price,
endTime=showInfo$endTime,
sourceWebName=showInfo$sourceWebName,
stringsAsFactors=FALSE
)
str(exhibitionList[[1]])
View(exhibitionList)
df_oneShow <- data.frame(
title=exhibitionList[[1]][["title"]],
time=exhibitionList[[1]][["showInfo"]][[1]][["time"]],
location=exhibitionList[[1]][["showInfo"]][[1]][["location"]],
locationName=exhibitionList[[1]][["showInfo"]][[1]][["locationName"]],
price=exhibitionList[[1]][["showInfo"]][[1]][["price"]],
endTime=exhibitionList[[1]][["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionList[[1]][["sourceWebName"]],
stringsAsFactors=FALSE
)
df_oneShow <- data.frame(
title=exhibitionList[[1]][["title"]],
time=exhibitionList[[1]][["showInfo"]][[1]][["time"]],
location=exhibitionList[[1]][["showInfo"]][[1]][["location"]],
locationName=exhibitionList[[1]][["showInfo"]][[1]][["locationName"]],
price=exhibitionList[[1]][["showInfo"]][[1]][["price"]],
endTime=exhibitionList[[1]][["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionList[[1]][["sourceWebName"]],
stringsAsFactors=FALSE
)
names(df_oneShow)
dataframe_show_info <- function(exhibitionInput){
df_oneShow <- data.frame(
title=exhibitionInput[["title"]],
time=exhibitionInput[["showInfo"]][[1]][["time"]],
location=exhibitionInput[["showInfo"]][[1]][["location"]],
locationName=exhibitionInput[["showInfo"]][[1]][["locationName"]],
price=exhibitionInput[["showInfo"]][[1]][["price"]],
endTime=exhibitionInput[["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionInput[["sourceWebName"]],
stringsAsFactors=FALSE
)
return(df_oneShow)
}
dataframe_show_info(exhibitionList[[5]])
dataframe_show_info <- function(exhibitionInput){
df_oneShow <- data.frame(
title=exhibitionInput[["title"]],
time=exhibitionInput[["showInfo"]][[1]][["time"]],
location=exhibitionInput[["showInfo"]][[1]][["location"]],
locationName=exhibitionInput[["showInfo"]][[1]][["locationName"]],
price=exhibitionInput[["showInfo"]][[1]][["price"]],
endTime=exhibitionInput[["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionInput[["sourceWebName"]],
stringsAsFactors=FALSE
)
return(df_oneShow)
}
dataframe_show_info
View(dataframe_show_info)
View(df_oneShow)
dataframe_show_info(exhibitionList[[5]])
library(purrr)
map_dfr(exhibitionList,dataframe_show_info) -> df_allShows
library(purrr)
map_dfr(exhibitionList,dataframe_show_info) -> df_allShows
View(df_allShows)
View(df_allShows)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
logic <- df_allShows$sourceWebName=="全國藝文活動資訊系統"
totalCount <- sum(logic)
logic <- df_allShows$sourceWebName=="全國藝文活動資訊系統"
totalCount <- sum(logic)
totalCount
only1Loss <- finStatement$`營業利益（損失）`<0 | finStatement$`基本每股盈餘（元）`<0
only1LossCompanies <- finStatement$`公司名稱`[only1Loss]
only1LossCompanies
xor(logiLoss1,logiLoss2) -> logiOnly1Loss
xor(loss1,loss2) -> logiOnly1Loss
finStatement$公司名稱[logiOnly1Loss] -> only1LossCompanies
# only1LossCompanies
xor(loss1,loss2) -> logiOnly1Loss
finStatement$公司名稱[logiOnly1Loss] -> only1LossCompanies
only1LossCompanies
finStatement[logiOnly1Loss,] -> subsample
subsample
knitr::opts_chunk$set(echo = TRUE)
nowAnnounce <- function(){
currentDateTime <- Sys.time()
hh<-hour(currentDateTime)
mm<-minute(currentDateTime)
cat("現在是",hh,"點",mm,"分")
}
nowAnnounce <- function(){
currentDateTime <- Sys.time()
hh<-hour(currentDateTime)
mm<-minute(currentDateTime)
cat("現在是",hh,"點",mm,"分")
}
nowAnnounce()
browseURL("https://www.ntpu.edu.tw")
textbookURL <- function(){
browseURL("https://via.hypothes.is/https://bookdown.org/tpemartin/ntpu-programming-for-data-science/")
}
textbookURL()
library(readr)
transcriptDataFinal <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/transcriptDataFinal.csv")
gpa_fun <- function(studentID){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(GPA)
}
gpa_fun2 <- function(studentID){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(
list(
平均成績=GPA,
成績單=subSample
)
)
}
gpa_fun2("92aS67fee") -> outputValue
outputValue$平均成績
outputValue$成績單
demand_supply_fun <- function(P,a,b,c,d){
Qs <- a+b*P
Qd <- c-d*P
ans <- Qd-Qs
return(
list(
供給量=Qs,
需求量=Qd,
超額供給量=ans
)
)
}
demand_supply_fun(1,0,1,5,1)
a <- readline(prompt = "請輸入一個數字： ")
knitr::opts_chunk$set(echo = TRUE)
supply_fun2 <- function(P,a,b){
Qs <- a+b*P
if(P>=0) {
return(Qs)
}
}
supply_fun2(P=-1,0,1)
supply_fun2(P=2,0,1)
supply_fun3 <- function(P,a,b){
Qs <- a+b*P
if(P < 0) {
message("P不能為負值") # 在螢幕出現的「錯誤」提示，沒有輸出任何值
} else {
return(Qs)
}
}
supply_fun3(P=-1,0,1)
supply_fun3(P=2,0,1)
supply_fun3 <- function(P,a,b){
Qs <- a+b*P
if(P < 0) {
message("P不能為負值") # 在螢幕出現的「錯誤」提示，沒有輸出任何值
} else {
return(Qs)
}
}
supply_fun3(P=-1,0,1)
supply_fun3(P=2,0,1)
View(supply_fun3)
supply_fun3 <- function(P,a,b){
Qs <- a+b*P
if(P < 0) {
message("P不能為負值") # 在螢幕出現的「錯誤」提示，沒有輸出任何值
} else {
return(Qs)
}
}
supply_fun3(P=-1,0,1)
supply_fun3(P=2,0,1)
supply_fun3 <- function(P,a,b){
Qs <- a+b*P
if(P < 0) {
message("P不能為負值") # 在螢幕出現的「錯誤」提示，沒有輸出任何值
} else {
return(Qs)
}
}
supply_fun3(P=-1,0,1)
supply_fun3(P=2,0,1)
library(readr)
transcriptDataFinal <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/transcriptDataFinal.csv")
gpa_fun2 <- function(studentID){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(
list(
平均成績=GPA,
成績單=subSample
)
)
}
gpa_fun <- function(studentID){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(GPA)
}
gpa_fun <- function(studentID){
if(studentID %in% transcriptDataFinal$學號){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/sum(subSample$學分數) -> GPA
return(GPA)
} else{
message("查無此學號")
}
}
gpa_fun <- function(studentID){
if(studentID %in% transcriptDataFinal$學號){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(GPA)
} else{
message("查無此學號")
}
}
gpa_fun("92aS67fee") # 顯示82.85276
gpa_fun("aa829838s") # 查無此學號
a <- readline(prompt = "請輸入一個數字： ")
if(a==1) {
print("你輸入了1")
} else if(a==2) {
print("你輸入了2")
} else if(a==3) {
print("你輸入了3")
} else {
print("你輸入了其他數字")
}
a <- readline(prompt = "請輸入一個數字： ")
if(a==1) {
print("你輸入了1")
} else if(a==2) {
print("你輸入了2")
} else if(a==3) {
print("你輸入了3")
} else {
print("你輸入了其他數字")
}
supply_fun4 <- function(P,a,b){
Qs <- a+b*P
if(P < 0) {
message("P不能為負值") # 在螢幕出現的「錯誤」提示，沒有輸出任何值
} else if(P < -a/b) {
message("P必需大於等於",-a/b,"(即-a/b值)")
} else {
return(Qs)
}
}
supply_fun4(P=-1,-3,1)
supply_fun4(P=2,-3,1)
supply_fun4(P=3,-3,1)
fizzbuzz <- function(x){
if(x%%3==0){
print("fizz")
} else if(x%%5==0){
print("buzz")
} else if(x%%15==0){
print("fizzbuzz")
} else{
return("else")
}
}
fizzbuzz(9)
fizzbuzz(9)
fizzbuzz(10)
fizzbuzz(30)
fizzbuzz(1)
fizzbuzz <- function(x){
if(x%%15==0){
print("fizzbuzz")
} else if(x%%3==0){
print("fizz")
} else if(x%%5==0){
print("buzz")
} else {
print(x)
}
}
fizzbuzz(9)
fizzbuzz(10)
fizzbuzz(30)
fizzbuzz(1)
fizzbuzz <- function(x){
if(x%%15==0){
return("fizzbuzz")
} else if(x%%3==0){
return("fizz")
} else if(x%%5==0){
return("buzz")
} else {
return(x)
}
}
fizzbuzz <- function(input){
zeroRemBy3 <- input %% 3 == 0
zeroRemBy5 <- input %% 5 == 0
if(zeroRemBy3 & !zeroRemBy5){
return("fizz")
} else if(zeroRemBy5 & !zeroRemBy3){
return("buzz")
} else if(zeroRemBy3 & zeroRemBy5){
return("fizzbuzz")
} else{
message("other situation")
}
}
fizzbuzz <- function(input){
zeroRemBy3 <- input %% 3 == 0
zeroRemBy5 <- input %% 5 == 0
if(zeroRemBy3 & !zeroRemBy5){
return("fizz")
} else if(zeroRemBy5 & !zeroRemBy3){
return("buzz")
} else if(zeroRemBy3 & zeroRemBy5){
return("fizzbuzz")
} else{
message("other situation")
}
}
fizzbuzz(9)
fizzbuzz(10)
fizzbuzz(30)
fizzbuzz(1)
fizzbuzz <- function(input){
zeroRemBy3 <- input %% 3 == 0
zeroRemBy5 <- input %% 5 == 0
if(zeroRemBy3 & !zeroRemBy5){
return("fizz")
} else if(zeroRemBy5 & !zeroRemBy3){
return("buzz")
} else if(zeroRemBy3 & zeroRemBy5){
return("fizzbuzz")
} else{
return(x)
}
}
fizzbuzz(9)
fizzbuzz(10)
fizzbuzz(30)
fizzbuzz(1)
fizzbuzz <- function(input){
zeroRemBy3 <- input %% 3 == 0
zeroRemBy5 <- input %% 5 == 0
if(zeroRemBy3 & !zeroRemBy5){
return("fizz")
} else if(zeroRemBy5 & !zeroRemBy3){
return("buzz")
} else if(zeroRemBy3 & zeroRemBy5){
return("fizzbuzz")
} else{
return(input)
}
}
fizzbuzz(9)
fizzbuzz(10)
fizzbuzz(30)
fizzbuzz(1)
a <- c(1,3,5)
a
a>2 # 此邏輯條件產生三個值
if(a>2) {
print("a大於2")
}
a
a>2
all(a>2)
if(all(a>2) {
if(all(a>2)) {
print("a大於2")
}
a
a>2
all(a>2)
any(a>2)
a <- 3
testfun <- function(x){
y <- a/4
output <- x*y
return(output)
}
testfun(2) #called
a <- 4
testfun(2)
library(readr)
transcriptDataFinal <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/transcriptDataFinal.csv")
transcriptDataFinal[transcriptDataFinal$學號 != "92aS67fee",] -> transcriptDataFinal
gpa_fun("92aS67fee") # 顯示82.85276
gpa_fun <- function(studentID){
if(studentID %in% transcriptDataFinal$學號){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(GPA)
} else{
message("查無此學號")
}
}
gpa_fun("92aS67fee") # 顯示82.85276
gpa_fun("aa829838s") # 查無此學號
library(readr)
transcriptDataFinal <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/transcriptDataFinal.csv")
gpa_fun <- function(studentID){
if(studentID %in% transcriptDataFinal$學號){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(GPA)
} else{
message("查無此學號")
}
}
gpa_fun("92aS67fee") # 顯示82.85276
gpa_fun("aa829838s") # 查無此學號
transcriptDataFinal[transcriptDataFinal$學號 != "92aS67fee",] -> transcriptDataFinal
gpa_fun("92aS67fee") # 顯示82.85276
gpa_fun4 <- function(studentID,transcriptDataFinal){
if(studentID %in% transcriptDataFinal$學號){
transcriptDataFinal$學號==studentID -> logiChosenStudent
subSample <- transcriptDataFinal[logiChosenStudent,]
sum(subSample$學期成績*subSample$學分數)/
sum(subSample$學分數) -> GPA
return(GPA)
} else{
message("查無此學號")
}
}
transcriptDataFinal <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/transcriptDataFinal.csv")
gpa_fun4("92aS67fee",transcriptDataFinal)
